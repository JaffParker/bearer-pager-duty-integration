(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,n){e.exports=n(37)},36:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(18),o=n(3),u="2f535b38228787320c10e556e2cf82c6aeb48a942483e5f19f",i="a725bd-pager-duty-integration-demo",l=(n(36),n(1)),s=n(4),b=function(e){var t=Object(a.useState)(!1),n=Object(l.a)(t,2),c=n[0],r=n[1],u=Object(a.useState)(),s=Object(l.a)(u,2),b=s[0],d=s[1],f=Object(a.useState)(),m=Object(l.a)(f,2),O=m[0],j=m[1],v=Object(a.useContext)(o.BearerContext).bearer;return Object(a.useEffect)(function(){r(!0),v.functionFetch(i,"listEscalationPolicies",{query:{setupId:e}}).then(function(e){var t=e.data;d(t)}).catch(j).finally(function(){return r(!1)})},[]),{loading:c,data:{policies:b},error:O}};var d=function(e){var t=Object(a.useState)(!1),n=Object(l.a)(t,2),c=n[0],r=n[1],u=Object(a.useState)(),s=Object(l.a)(u,2),b=s[0],d=s[1],f=Object(a.useState)(),m=Object(l.a)(f,2),O=m[0],j=m[1],v=Object(a.useContext)(o.BearerContext).bearer;return{loading:c,data:{referenceId:b},error:O,createIntegration:Object(a.useCallback)(function(t){return r(!0),v.functionFetch(i,"createIntegration",{query:{setupId:e},escalationPolicy:t}).then(function(e){var t=e.referenceId;return d(t),t}).catch(function(e){return j(e),e}).finally(function(){r(!1)})},[r,e,d,j])}};var f=function(e){var t=Object(a.useState)(!1),n=Object(l.a)(t,2),c=n[0],r=n[1],u=Object(a.useState)(),s=Object(l.a)(u,2),b=s[0],d=s[1],f=Object(a.useState)(),m=Object(l.a)(f,2),O=m[0],j=m[1],v=Object(a.useContext)(o.BearerContext).bearer;return{loading:c,data:{eventResult:b},error:O,sendEvent:Object(a.useCallback)(function(t){return r(!0),v.functionFetch(i,"sendEvent",{query:{setupId:e,referenceId:t}}).then(function(e){return d(e.data),e.data}).catch(function(e){return j(e),e}).finally(function(){r(!1)})},[])}};var m,O,j=(m=function(e){var t=e.referenceId,n=e.fetch,c=e.loading,r=a.useCallback(function(){t&&n(t).then(function(e){console.log("Event details",e),alert(JSON.stringify(e))}).catch(console.error)},[n,t]);return a.createElement("button",{type:"button",disabled:!t||c,className:"btn btn-secondary",onClick:r},c?"Loading...":"Send test event")},O="882e24f0-4bda-11e9-a73b-6dac8ea7c0ec",function(e){var t=f(O),n=t.sendEvent,a=t.data,r=Object(s.a)(t,["sendEvent","data"]);return c.a.createElement(m,Object.assign({},e,{data:a.eventResult,fetch:n},r))}),v=function(e,t){return function(n){var a=d(t),r=a.createIntegration,o=a.data,u=Object(s.a)(a,["createIntegration","data"]);return c.a.createElement(e,Object.assign({},n,{fetch:r,data:o.referenceId},u))}}(function(e){var t=e.policies,n=e.data,c=e.fetch,r=e.loading,o=a.useState(-1),u=Object(l.a)(o,2),i=u[0],s=u[1],b=a.useCallback(function(e){s(e.target.value)},[s]),d=a.useCallback(function(e){e.preventDefault(),c(t&&t[i]).then(function(e){console.log("Integration details",e)}).catch(console.error)},[c]);return t?a.createElement("form",{style:{width:300},onSubmit:d},a.createElement("select",{className:"form-control custom-select",value:i,onChange:b},a.createElement("option",null,"Select an escalation policy"),a.createElement("option",null,"-------"),t.map(function(e,t){return a.createElement("option",{key:e.id,value:t},e.summary)})),a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:r},r?"Saving...":"Save settings"),a.createElement(j,{referenceId:n||"9ea0f1-393b2d471c-b9ac1102-fd526493"})):a.createElement("p",null,"Fetching escalation policies...")},"882e24f0-4bda-11e9-a73b-6dac8ea7c0ec"),p=function(e,t){return function(n){var a=b(t),r=a.data,o=Object(s.a)(a,["data"]);return c.a.createElement(e,Object.assign({},n,{data:r.policies},o))}}(function(e){var t=e.data;return a.createElement(v,{policies:t})},"882e24f0-4bda-11e9-a73b-6dac8ea7c0ec");var g=document.getElementById("root");Object(r.render)(a.createElement(function(){return a.createElement("div",{className:"App"},a.createElement(o.Bearer,{clientId:u},a.createElement(p,null)))},null),g)}},[[20,1,2]]]);
//# sourceMappingURL=main.97eaca9b.chunk.js.map